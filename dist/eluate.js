(()=>{function s(e,n){let t=Object.keys(n).map(o=>`globalThis.${o} = this.${o}`).join(";");return new Function(`${t};
return ${e}`).bind(n)}function m(e,n,t){let o=s(n,t);t.$text.push({element:e,valueFn:o}),e.innerHTML=o()}var f=m;function w(e,n,t,o){let r=new Function("$event",t).bind(o);n.addEventListener(e,r)}var u=w;function p(e,n,t){let o=s(n,t);t.$show.push({element:e,valueFn:o}),e.style.display=o()?"":"none"}var h=p;function d(e,n){Object.entries(e.dataset).forEach(([t,o])=>{if(t==="text")f(e,o,n);else if(t.startsWith("on:")){let[,r]=t.split(":");u(r,e,o,n)}else t==="show"&&h(e,o,n)}),[...e.children].forEach(t=>{d(t,n)})}var $=d;function E(e={}){let n=[],t=[];return new Proxy(e,{get(r,i){return i==="$text"?n:i==="$show"?t:new Function(`return this.${i}`).call(r)},set(r,i,c){i==="$text"?n=c:i==="$show"&&(t=c),new Function(`return this.${i} = ${c}`).call(r),n.forEach(({element:l,valueFn:a})=>{l.innerHTML=a()}),t.forEach(({element:l,valueFn:a})=>{l.style.display=a()?"":"none"})}})}function x(e,n){n===""&&(n="{}");let t=new Function(`return ${n};`)();if(t.constructor!==Object)throw new Error("`data-set` value must be an object");let o=E(t);[...e.children].forEach(r=>{$(r,o)})}var b=x;document.querySelectorAll("*").forEach(e=>{Object.entries(e.dataset).forEach(([n,t])=>{n==="set"&&b(e,t)})});document.querySelectorAll("*").forEach(e=>{Object.entries(e.dataset).forEach(([n,t])=>{delete e.dataset[n]})});})();
//# sourceMappingURL=eluate.js.map
